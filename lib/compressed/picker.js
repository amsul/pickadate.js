/*!
 * pickadate.js v3.0.4,Â 2013/06/11
 * By Amsul, http://amsul.ca
 * Hosted on http://amsul.github.io/pickadate.js
 * Licensed under MIT
 */
window.Picker=function(a,b,c){function d(e,f,g,h){function i(){return d._.node("div",d._.node("div",d._.node("div",d._.node("div",p.component.nodes(k.open),m.box),m.wrap),m.frame),m.holder)}function j(a){a.stopPropagation(),"focus"==a.type&&p.$root.addClass(m.focused),p.open()}if(!e)return d;var k={id:Math.abs(~~(1e9*Math.random()))},l=g?a.extend(!0,{},g.defaults,h):h||{},m=a.extend({},d.klasses(),l.klass),n=a(e),o=function(){return this.start()},p=o.prototype={constructor:o,$node:n,start:function(){return k&&k.start?p:(k.methods={},k.start=!0,k.open=!1,k.type=e.type,e.autofocus=e==document.activeElement,e.type="text",e.readOnly=!0,p.component=new g(p,l),p.$root=a(d._.node("div",i(),m.picker)).on({focusin:function(a){p.$root.removeClass(m.focused),a.stopPropagation()},mousedown:function(a){a.target!=p.$root.children()[0]&&a.stopPropagation()},click:function(b){var c=b.target,f=c.attributes.length?a(c):a(c).closest("[data-pick]"),g=f.data();c!=p.$root.children()[0]&&(b.stopPropagation(),p.$root.find(document.activeElement).length||e.focus(),g.nav&&!f.hasClass(m.navDisabled)?p.set("highlight",p.component.item.highlight,{nav:g.nav}):d._.isInteger(g.pick)&&!f.hasClass(m.disabled)?p.set("select",g.pick).close(!0):g.clear&&p.clear().close(!0))}}),p._hidden=l.formatSubmit?a("<input type=hidden name="+e.name+(l.hiddenSuffix||"_submit")+(n.data("value")?' value="'+d._.trigger(p.component.formats.toString,p.component,[l.formatSubmit,p.component.item.select])+'"':"")+">")[0]:c,n.addClass(m.input).on("focus.P"+k.id+" click.P"+k.id,j).on("change.P"+k.id,function(){p._hidden&&(p._hidden.value=e.value?d._.trigger(p.component.formats.toString,p.component,[l.formatSubmit,p.component.item.select]):"")}).on("keydown.P"+k.id,function(a){var b=a.keyCode,c=/^(8|46)$/.test(b);return 27==b?(p.close(),!1):((32==b||c||!k.open&&p.component.key[b])&&(a.preventDefault(),a.stopPropagation(),c?p.clear().close():p.open()),void 0)}).val(n.data("value")?d._.trigger(p.component.formats.toString,p.component,[l.format,p.component.item.select]):e.value).after(p.$root,p._hidden).data(f,p),p.on({start:p.component.onStart,render:p.component.onRender,stop:p.component.onStop,open:p.component.onOpen,close:p.component.onClose,set:p.component.onSet}).on({start:l.onStart,render:l.onRender,stop:l.onStop,open:l.onOpen,close:l.onClose,set:l.onSet}),e.autofocus&&p.open(),p.trigger("start").trigger("render"))},render:function(){return p.$root.html(i()),p.trigger("render")},stop:function(){return k.start?(p.close(),p._hidden&&p._hidden.parentNode.removeChild(p._hidden),p.$root.remove(),n.removeClass(m.input).off(".P"+k.id).removeData(f),e.type=k.type,e.readOnly=!1,p.trigger("stop"),k.methods={},k.start=!1,p):p},open:function(a){return k.open?p:(n.addClass(m.active),p.$root.addClass(m.opened),a!==!1&&(k.open=!0,n.focus(),b.on("click.P"+k.id+" focusin.P"+k.id,function(a){a.target!=e&&a.target!=document&&p.close()}).on("keydown.P"+k.id,function(a){var b=a.keyCode,c=p.component.key[b],f=a.target;27==b?p.close(!0):f!=e||!c&&13!=b?p.$root.find(f).length&&13==b&&(a.preventDefault(),f.click()):(a.preventDefault(),c?d._.trigger(p.component.key.go,p,[c]):p.$root.find("."+m.highlighted).hasClass(m.disabled)||p.set("select",p.component.item.highlight).close())})),p.trigger("open"))},close:function(a){return a&&(n.off("focus.P"+k.id).focus(),setTimeout(function(){n.on("focus.P"+k.id,j)},0)),n.removeClass(m.active),p.$root.removeClass(m.opened+" "+m.focused),k.open&&(k.open=!1,b.off(".P"+k.id)),p.trigger("close")},clear:function(){return p.set("clear")},set:function(a,b,c){var e,f,g=d._.isObject(a),h=g?a:{};if(a){g||(h[a]=b);for(e in h)f=h[e],p.component.item[e]&&p.component.set(e,f,c||{}),("select"==e||"clear"==e)&&n.val("clear"==e?"":d._.trigger(p.component.formats.toString,p.component,[l.format,p.component.get(e)])).trigger("change");p.render()}return p.trigger("set",h)},get:function(a,b){return a=a||"value",null!=k[a]?k[a]:"value"==a?e.value:p.component.item[a]?"string"==typeof b?d._.trigger(p.component.formats.toString,p.component,[b,p.component.get(a)]):p.component.get(a):void 0},on:function(a,b){var c,e,f=d._.isObject(a),g=f?a:{};if(a){f||(g[a]=b);for(c in g)e=g[c],k.methods[c]=k.methods[c]||[],k.methods[c].push(e)}return p},trigger:function(a,b){var c=k.methods[a];return c&&c.map(function(a){d._.trigger(a,p,[b])}),p}};return new o}return d.klasses=function(a){return a=a||"picker",{picker:a,opened:a+"--opened",focused:a+"--focused",input:a+"__input",active:a+"__input--active",holder:a+"__holder",frame:a+"__frame",wrap:a+"__wrap",box:a+"__box"}},d._={group:function(a){for(var b,c="",e=d._.trigger(a.min,a);e<=d._.trigger(a.max,a,[e]);e+=a.i)b=d._.trigger(a.item,a,[e]),c+=d._.node(a.node,b[0],b[1],b[2]);return c},node:function(a,b,c,d){return b?(b=Array.isArray(b)?b.join(""):b,c=c?' class="'+c+'"':"",d=d?" "+d:"","<"+a+c+d+">"+b+"</"+a+">"):""},lead:function(a){return(10>a?"0":"")+a},trigger:function(a,b,c){return"function"==typeof a?a.apply(b,c||[]):a},digits:function(a){return/\d/.test(a[1])?2:1},isObject:function(a){return{}.toString.call(a).indexOf("Object")>-1},isDate:function(a){return{}.toString.call(a).indexOf("Date")>-1},isInteger:function(a){return{}.toString.call(a).indexOf("Number")>-1&&0===a%1}},d.extend=function(b,c){a.fn[b]=function(e,f){var g=this.data(b);return"picker"==e?g:g&&"string"==typeof e?(d._.trigger(g[e],g,[f]),this):this.each(function(){var f=a(this);f.data(b)||new d(this,b,c,e)})},a.fn[b].defaults=c.defaults},d}(jQuery,jQuery(document));